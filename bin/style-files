#!/usr/bin/env Rscript

'sytle files.
Usage:
  style_files [--style=<style_guide>] <files>...

Options:
  --style=<style_guide>  Style guide [default: styler::tidyverse_style].

' -> doc

arguments <- docopt::docopt(doc)
print(arguments)

if (packageVersion("styler") < "1.1.1.9002") {
  stop(
    "Please install a newer version of styler. You can first try ", 
    "`install.packages('styler')`. Then check `packageVersion('styler')` ", 
    "If this does not result in a version >= '1.1.1.9002', ", 
    "use remotes::install_github('r-lib/styler')"
  )
} else {
  styler::style_file(arguments$files, style = eval(parse(text = arguments$style)))
}
